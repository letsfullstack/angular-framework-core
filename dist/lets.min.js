!function(){"use strict";function e(){var e=this;return e._placeholderList=["paciente"],e._placeholderAttr=["nome"],e.removeAccents=function(e){var t="ÀÁÂÃÄÅàáâãäåßÒÓÔÕÕÖØòóôõöøÈÉÊËèéêëðÇçÐÌÍÎÏìíîïÙÚÛÜùúûüÑñŠšŸÿýŽž",a="AAAAAAaaaaaaBOOOOOOOooooooEEEEeeeeeCcDIIIIiiiiUUUUuuuuNnSsYyyZz";e=e.split("");var n,i,l=e.length;for(n=0;l>n;n++)-1!=(i=t.indexOf(e[n]))&&(e[n]=a[i]);return e.join("")},e._removeSpecialChars=function(e){var t="!@#$%*()-_+=/.,:;?[{]}`~^|";e=e.split("");var a,n=e.length;for(a=0;n>a;a++)-1!=t.indexOf(e[a])&&(e[a]="");return e.join("")},e.lemmatize=function(t){return t=e.removeAccents(t),e._removeSpecialChars(t)},e.changePlaceholders=function(t,a){return e._placeholderList.forEach(function(n,i){if(a[n]){var l="["+n.toUpperCase()+"]";if(-1!==t.indexOf(l)){var o=t.split(l),d="",r=o.length;o.forEach(function(t,l){d+=t,r-1>l&&(d+=a[n][e._placeholderAttr[i]])}),t=d}}}),t},{removeAccents:e.removeAccents,lemmatize:e.lemmatize,changePlaceholders:e.changePlaceholders}}angular.module("letsAngular").service("utilsStringService",e),e.inject=[]}(),function(){"use strict";function e(e,t,a,n){var i=this;return i._printHTML=function(e){var t=$("<iframe></iframe>").appendTo("body")[0];t.contentWindow.printAndRemove=function(){t.contentWindow.print(),setTimeout(function(){$(t).remove()},3e3)};var a='<!doctype html><html><body onload="printAndRemove();">'+e+"</body></html>",n=t.contentWindow.document.open("text/html","replace");n.write(a),n.close()},i.print=function(l,o){moment.locale("pt-br");var d=angular.extend(t.$new(),o);e(l).then(function(e){var t=a($("<div>"+e+"</div>"))(d),l=function(){d.$$phase?n(l):(i._printHTML(t.html()),d.$destroy())};l()})},{print:i.print}}e.$inject=["$templateRequest","$rootScope","$compile","$timeout"],angular.module("letsAngular").service("utilsPrintService",e),e.inject=["$templateRequest","$rootScope","$compile","$timeout"]}(),function(){"use strict";function e(){var e=this;return e.convertObjSearch=function(e,t){var a={};return Object.keys(e).forEach(function(n){if(e[n])if("object"==typeof e[n]){var i={};Object.keys(e[n]).forEach(function(a){if("createdAt"!==a&&"updatedAt"!==a){var l=a;"id"!==a&&(l="label"),"label"===l&&t&&n===t.relation?i.label=e[n][t.label]:i[l]=e[n][a]}}),a[n+".label"]=i,a[n]=i.id}else-1===n.indexOf("id")&&"createdAt"!==n&&"updatedAt"!==n&&(a[n]=e[n])}),a},e.convertObjLabels=function(e){return e.forEach(function(e){Object.keys(e).forEach(function(t){if("object"==typeof e[t]){var a=t.split(".")[0];"label"===t.split(".")[1]&&(e[a]=angular.copy(e[t]),delete e[t])}})}),e},e.setInputsFromObject=function(e){Object.keys(e).forEach(function(t){if(e[t]&&-1===t.indexOf("hashKey")&&"id"!==t&&"createdAt"!==t&&"updatedAt"!==t){var a=angular.element("#"+t).scope();void 0===a&&-1!==t.indexOf("label")&&(a=angular.element("#"+t.split(".")[0]).scope()),a&&(a.field.autocomplete?"object"==typeof e[t]&&(e[t].label||(e[t].label=e[t].nome),a.$parent.data[t]=e[t].label,a.$parent.data[t+".label"]=e[t]):a.$parent.data[t]=e[t])}})},{convertObjSearch:e.convertObjSearch,convertObjLabels:e.convertObjLabels,setInputsFromObject:e.setInputsFromObject}}angular.module("letsAngular").service("utilsObjectService",e),e.inject=[]}(),function(){"use strict";function e(){var e=this;return e.getDiffDuration=function(e,t,a){moment.isMoment(e)||(e=moment(e)),moment.isMoment(t)||(t=moment(t));var n=moment.duration(e.diff(t));switch(a){case"day":return n.asDays();case"hour":return n.asHours();case"minute":return n.asMinutes();case"second":return n.asSeconds();case"week":return n.asWeeks();case"month":return n.asMonths();case"year":return n.asYears();default:return n.asMilliseconds()}},{getDiffDuration:e.getDiffDuration}}angular.module("letsAngular").service("utilsDateTimeService",e),e.inject=[]}(),function(){"use strict";function e(){var e=this;return e._getFilledFilterAttr=function(e,t){var a={radios:[],checkboxes:[]};return Object.keys(e).forEach(function(t){null!==e[t]&&a.radios.push(t)}),Object.keys(t).forEach(function(e){t[e].length>0&&a.checkboxes.push(e)}),a},e._findCheckAttr=function(e,t){var a=null;return Object.keys(t).forEach(function(n){n===e&&(a=t[n])}),a},e.filterList=function(t,a,n,i,l,o){var d=t.slice(0),r=Object.keys(o).length,s=e._getFilledFilterAttr(a,i),c="neutral";s.checkboxes.forEach(function(e){i[e].length>l[e].length?c="add":i[e].length<l[e].length&&(c="reduce")}),"add"===c&&(d=t.slice(0),c="reduce");var u=[],f=s.checkboxes.length!==r;return f&&d.forEach(function(e,t){e.multiple&&-1===u.indexOf(t)&&u.unshift(t)}),d.forEach(function(t,l){if(t.multiple&&!f)s.checkboxes.forEach(function(a){if("reduce"===c&&i[a].length!==n[a].length){var d=!1,r=e._findCheckAttr(a,o);i[a].forEach(function(e){t[a][r]===e&&(d=!0)}),d||-1===u.indexOf(l)&&u.unshift(l)}});else{var d=!1;s.radios.forEach(function(e){d||(a[e]&&t.label===e?d=!0:a[e]||t.label!==e||(d=!1))}),d||-1===u.indexOf(l)&&u.unshift(l)}}),u.forEach(function(e){d.splice(e,1)}),d.sort(function(e,t){return moment(t.inicio).diff(moment(e.inicio),"seconds")}),d},e.orderList=function(e,t){var a=!1;return Object.keys(e[0]).forEach(function(e){t===e&&(a=!0)}),a?e.sort(function(e,a){return e[t]<a[t]?-1:e[t]>a[t]?1:0}):e},e.getMinMaxValues=function(e,t,a,n,i,l,o){var d={x:o[0][t],y:o[0][i]},r={x:o[0][t],y:o[0][i]};return o.forEach(function(e){e[t]<d.x&&(d.x=e[t]),e[t]>r.x&&(r.x=e[t]),e[i]<d.y&&(d.y=e[i]),e[i]>r.y&&(r.y=e[i])}),"date"===e?(d.x=new Date(moment(d.x).subtract(a,"day").format("MM/DD/YYYY")),r.x=new Date(moment(r.x).add(a,"day").format("MM/DD/YYYY"))):(d.x-=a,r.x+=a),"date"===n?(d.y=new Date(moment(d.y).subtract(l,"day").format("MM/DD/YYYY")),r.y=new Date(moment(r.y).add(l,"day").format("MM/DD/YYYY"))):(d.y-=l,r.y+=l),{min:d,max:r}},{filterList:e.filterList,orderList:e.orderList,getMinMaxValues:e.getMinMaxValues}}angular.module("letsAngular").service("utilsComparatorService",e),e.inject=[]}(),function(){"use strict";function e(e,t,a){var n=this;return n._createModal=function(t){return e.open(t).result},n.createCRUDModal=function(e,a,i,l,o,d){return n._createModal({animation:!0,templateUrl:d||"src/views/crud/crud-modal.html",controller:o||"CRUDFormModalController",resolve:{headers:function(){return e},parentModel:function(){return a},autocompleteDetail:function(){return l},data:function(){var e;try{e=angular.copy(i)}catch(a){e=t.extend({},i)}return e}},size:"lg",backdrop:"static",keyboard:!1})},n.hide=function(){a.$emit("cancel-modal")},{createCRUDModal:n.createCRUDModal,hide:n.hide}}e.$inject=["$modal","jQuery","$rootScope"],angular.module("letsAngular").service("fwModalService",e),e.inject=["$modal","jQuery","$rootScope"]}(),function(){"use strict";function e(e){var t=this;return t.emitFormErrors=function(t){var a=[],n=Object.keys(t.$error),i=/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;for(var l in n){var o=t.$error[n[l]];for(var d in o){var r=o[d].$options.fieldInfo.label;"required"==n[l]?a.push("O campo "+r+" é obrigatório"):"date"==n[l]&&0==i.test(o[d].$viewValue)&&a.push("O campo "+r+" está com uma data inválida")}}a.length>0&&e.warning(a.join("<br />"))},{emitFormErrors:t.emitFormErrors}}e.$inject=["ngToast"],angular.module("letsAngular").service("fwErrorService",e),e.inject=["ngToast"]}(),function(){"use strict";function e(){var e=this;return e.configD3chart=function(e,t,a){var n=null,i={left:40,bottom:28,right:28,top:28};return a||(a={x:[],y:[0,150]}),n="multibar"===e?nv.models.multiBarChart().margin(i).color(t).yDomain(a.y):nv.models.lineChart().margin(i).color(t).xDomain(a.x).yDomain(a.y),n.xAxis.showMaxMin(!1).tickFormat(function(e){return d3.time.format("%d/%m/%y")(new Date(e))}),n.xScale(d3.time.scale()),n.yAxis.showMaxMin(!1).tickFormat(d3.format(",f")),n.tooltip.enabled(!1),n},e.configD3chartData=function(e,t,a){var n=[];return a.forEach(function(e){var t={x:new Date(moment(e.data).format("MM/DD/YYYY")),y:e.valor};n.push(t)}),[{area:e,key:t,values:n}]},e.getMockD3chartsData=function(e){return e||(e=!1),{glicemiaCapilar:[{area:e,key:"Valor",values:[{x:new Date("06/10/2017").getTime(),y:77},{x:new Date("06/17/2017").getTime(),y:70},{x:new Date("07/01/2017").getTime(),y:121},{x:new Date("07/08/2017").getTime(),y:84},{x:new Date("07/15/2017").getTime(),y:75},{x:new Date("07/22/2017").getTime(),y:80},{x:new Date("07/29/2017").getTime(),y:76},{x:new Date("08/05/2017").getTime(),y:120},{x:new Date("08/12/2017").getTime(),y:77},{x:new Date("08/19/2017").getTime(),y:85}]}],pressao:[{area:e,key:"Sistólica",values:[{x:new Date("06/10/2017").getTime(),y:125},{x:new Date("06/17/2017").getTime(),y:139},{x:new Date("07/01/2017").getTime(),y:129},{x:new Date("07/08/2017").getTime(),y:133},{x:new Date("07/15/2017").getTime(),y:134},{x:new Date("07/22/2017").getTime(),y:133},{x:new Date("07/29/2017").getTime(),y:143},{x:new Date("08/05/2017").getTime(),y:148},{x:new Date("08/12/2017").getTime(),y:139},{x:new Date("08/19/2017").getTime(),y:134}]},{area:e,key:"Diastólica",values:[{x:new Date("06/10/2017").getTime(),y:78},{x:new Date("06/17/2017").getTime(),y:75},{x:new Date("07/01/2017").getTime(),y:83},{x:new Date("07/08/2017").getTime(),y:80},{x:new Date("07/15/2017").getTime(),y:77},{x:new Date("07/22/2017").getTime(),y:79},{x:new Date("07/29/2017").getTime(),y:83},{x:new Date("08/05/2017").getTime(),y:81},{x:new Date("08/12/2017").getTime(),y:74},{x:new Date("08/19/2017").getTime(),y:81}]}],peso:[{area:e,key:"Quilos",values:[{x:new Date("06/10/2017").getTime(),y:89},{x:new Date("06/17/2017").getTime(),y:90},{x:new Date("07/01/2017").getTime(),y:89},{x:new Date("07/08/2017").getTime(),y:92},{x:new Date("07/15/2017").getTime(),y:93},{x:new Date("07/22/2017").getTime(),y:94},{x:new Date("07/29/2017").getTime(),y:93},{x:new Date("08/05/2017").getTime(),y:93},{x:new Date("08/12/2017").getTime(),y:93},{x:new Date("08/19/2017").getTime(),y:92}]}],altura:[{area:e,key:"Metros",values:[{x:new Date("06/10/2017").getTime(),y:1.76},{x:new Date("06/17/2017").getTime(),y:1.76},{x:new Date("07/01/2017").getTime(),y:1.76},{x:new Date("07/08/2017").getTime(),y:1.76},{x:new Date("07/15/2017").getTime(),y:1.76},{x:new Date("07/22/2017").getTime(),y:1.76},{x:new Date("07/29/2017").getTime(),y:1.76},{x:new Date("08/05/2017").getTime(),y:1.76},{x:new Date("08/12/2017").getTime(),y:1.76},{x:new Date("08/19/2017").getTime(),y:1.76}]}],imc:[{area:e,key:"Valor",values:[{x:new Date("06/10/2017").getTime(),y:15.3},{x:new Date("06/17/2017").getTime(),y:15.5},{x:new Date("07/01/2017").getTime(),y:15.3},{x:new Date("07/08/2017").getTime(),y:15.8},{x:new Date("07/15/2017").getTime(),y:16},{x:new Date("07/22/2017").getTime(),y:16.2},{x:new Date("07/29/2017").getTime(),y:16},{x:new Date("08/05/2017").getTime(),y:16},{x:new Date("08/12/2017").getTime(),y:16},{x:new Date("08/19/2017").getTime(),y:15.8}]}],hdlLdl:[{area:e,key:"HDL",values:[{x:new Date("06/10/2017").getTime(),y:43},{x:new Date("06/17/2017").getTime(),y:41},{x:new Date("07/01/2017").getTime(),y:42},{x:new Date("07/08/2017").getTime(),y:45},{x:new Date("07/15/2017").getTime(),y:46},{x:new Date("07/22/2017").getTime(),y:48},{x:new Date("07/29/2017").getTime(),y:44},{x:new Date("08/05/2017").getTime(),y:41},{x:new Date("08/12/2017").getTime(),y:42},{x:new Date("08/19/2017").getTime(),y:40}]},{area:e,key:"LDL",values:[{x:new Date("06/10/2017").getTime(),y:121},{x:new Date("06/17/2017").getTime(),y:130},{x:new Date("07/01/2017").getTime(),y:137},{x:new Date("07/08/2017").getTime(),y:138},{x:new Date("07/15/2017").getTime(),y:120},{x:new Date("07/22/2017").getTime(),y:122},{x:new Date("07/29/2017").getTime(),y:123},{x:new Date("08/05/2017").getTime(),y:124},{x:new Date("08/12/2017").getTime(),y:122},{x:new Date("08/19/2017").getTime(),y:120}]}]}},e.getMockD3chartsConfig=function(){return{glicemiaCapilar:e.configD3chart("line",["#092e64"],{x:[new Date("06/10/2017"),new Date("08/09/2017")],y:[50,130]}),pressao:e.configD3chart("line",["#092e64","#008df5"],{x:[new Date("06/10/2017"),new Date("08/09/2017")],y:[50,150]}),peso:e.configD3chart("line",["#092e64"],{x:[new Date("06/10/2017"),new Date("08/09/2017")],y:[80,100]}),altura:e.configD3chart("line",["#092e64"],{x:[new Date("06/10/2017"),new Date("08/09/2017")],y:[0,2]}),imc:e.configD3chart("line",["#092e64"],{x:[new Date("06/10/2017"),new Date("08/09/2017")],y:[12,20]}),hdlLdl:e.configD3chart("line",["#092e64","#008df5"],{x:[new Date("06/10/2017"),new Date("08/09/2017")],y:[30,150]})}},{getMockD3chartsData:e.getMockD3chartsData,getMockD3chartsConfig:e.getMockD3chartsConfig,configD3chart:e.configD3chart,configD3chartData:e.configD3chartData}}angular.module("letsAngular").service("fwChartService",e),e.inject=[]}(),function(){"use strict";function e(e,t,a,n,i,l,o,d){var r=l.API_URL,s=this;s.updateLocalStorage=function(e,t){var a=s.getUser();a[e]=t,s.setUserInfo(a)},s.setUserLb=function(e){t.setUser(e.id,e.userId,e.user),t.rememberMe=!0,t.save()},s.setUserInfo=function(e){window.localStorage.user=angular.toJson(e)},s.getUser=function(){return window.localStorage.user?JSON.parse(window.localStorage.user):!1},s.isAuthenticated=function(){return null!=t.currentUserId},s.authenticate=function(e){return i.authenticate(e).then(function(e){var t={accessToken:e.access_token};return o.post(r+"users/facebook/token",t)}).then(function(e){var t={id:e.data.id,userId:e.data.user.id,user:e.data.user};s.setUserLb(t),s.setUserInfo(e.data.user),s.removeSatellizer(),n.go("main.search")})["catch"](function(e){console.debug(e)})},s.logout=function(i){a.userLogout({accessToken:i}).$promise.then(function(a){t.clearUser(),t.clearStorage(),e.localStorage.removeItem("user"),n.go("login")})["catch"](function(a){t.clearUser(),t.clearStorage(),e.localStorage.removeItem("user"),n.go("login")})},s.getCurrentUserId=function(){return t.currentUserId},s.getCurrentUserToken=function(){return t.accessTokenId},s.removeSatellizer=function(){e.localStorage.getItem("satellizer_token")&&e.localStorage.removeItem("satellizer_token")}}e.$inject=["$window","LoopBackAuth","Usuario","$state","$auth","appSettings","$http","$q"],angular.module("letsAngular").service("fwAuthService",e),e.inject=["$window","LoopBackAuth","Usuario","$state","$auth","appSettings","$http"]}(),function(){"use strict";function e(e){return{restrict:"A",scope:!0,link:function(t,a){t.defaultProgress=0,t.alreadySent=!1,e(function(){void 0!=t.data[t.field.name]&&null!=t.data[t.field.name]&&(t.defaultProgress=100,t.alreadySent=!0)},200),t.upload=function(n,i){t.f=n,t.errFile=i&&i[0],n&&(n.upload=t._upload(t.field,n),n.upload.then(function(t){e(function(){n.result=t.data;var e=a.find('input[type="hidden"]');e.controller("ngModel").$setViewValue(n.name),t.data.file||(t.data.file={name:t.data.result.files.file[0].name}),e.scope().data[e.scope().field.customOptions.file[0]]=t.data.file.name})},function(e){e.status>0&&(t.errorMsg=e.status+": "+e.data)},function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))}}}}angular.module("letsAngular").directive("fwUpload",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){return{restrict:"E",scope:{tags:"="},template:'<div class="input-group fw-input-group"><input type="text" class="form-control" placeholder="add a tag..." ng-model="newValue" /> <span class="input-group-btn"><a class="btn btn-default" ng-click="add()">Add</a></span></div><div class="tags"><div ng-repeat="(idx, tag) in tags" class="tag label label-success">{{tag}} <a class="close" href ng-click="remove(idx)">×</a></div></div>',link:function(e,t){null==e.tags&&(e.tags=[]);var a=angular.element(t).find("input");e.autocomplete,e.add=function(){-1==e.tags.indexOf(e.newValue)&&e.tags.push(e.newValue),e.newValue=""},e.remove=function(t){e.tags.splice(t,1)},a.bind("keypress",function(t){13==t.keyCode&&(t.stopPropagation(),t.preventDefault(),e.$apply(e.add))})}}}angular.module("letsAngular").directive("fwTags",e),e.$inject=[]}(),function(){"use strict";function e(e,t,a,n,i){return{restrict:"E",scope:!0,templateUrl:"src/views/framework/input.html",replace:!0,link:{pre:function(t,l,o,d){var r=l.attr("fw-data");if(void 0==t.field.customOptions.events&&(t.field.customOptions.events={}),t.fieldHtml=function(){return i.trustAsHtml(t.field.toString())},"data"!=r&&"modal_data"!=r&&(t.data=t[r]),"data"!=r&&t.field.autocomplete!==!1){void 0===t.detail_key&&(t.detail_key=t.headers.route);var s=t.detail_key;t.acdetail&&(t.autocomplete=function(e,a){return t.autocompleteDetail(s,e,a)}),t.autocompleteSelect=function(e,a,n){return t.autocompleteDetailSelect(s,e,a,n)}}if("data"!=r&&void 0!=t.field.customOptions.file&&(t.download=function(e,a){var n=t.detail_key;return t.downloadDetail(n,e,a,t.data)}),void 0!=t.field.customOptions.cep)l.find("input.main-input").blur(function(){var a=angular.element(this).scope();e.get(this.value).then(function(e){var n=a.field.customOptions.cep;a.data[n.address]=e.logradouro,a.data[n.district]=e.bairro,a.data[n.city]=e.localidade,a.data[n.state]=e.uf,t.$$phase||t.$apply()})});else if(void 0!=t.field.customOptions.multiple&&1==t.field.customOptions.multiple){var c=a(l.contents())(t);console.log(c)}n(l).on("blur",":input[ng-model]",function(e){try{void 0!=angular.element(this).scope().field.customOptions.events.blur&&angular.element(this).scope().field.customOptions.events.blur.call(this,e)}catch(e){console.log(e)}}),t.isEmpty=function(e){return Object.keys(e).length}}}}}angular.module("letsAngular").directive("fwInput",e),e.$inject=["viaCEP","$timeout","$compile","jQuery","$sce"]}(),function(){"use strict";function e(e,t,a,n){return{restrict:"E",scope:!0,templateUrl:"src/views/framework/input-detail.html",replace:!0,link:{post:function(e,t,a,n){}}}}angular.module("letsAngular").directive("fwInputDetail",e),e.$inject=["viaCEP","$timeout","$compile","jQuery"]}(),function(){"use strict";function e(e,t,a,n,i){return{restrict:"A",link:{post:function(a,i,l,o){if(o||(o=i.controller("ngModel")),void 0!=a.field.customOptions.cpf)i.mask("999.999.999-99");else if(void 0!=a.field.customOptions.cnpj)i.mask("99.999.999/9999-99");else if("float"==a.field.type)void 0!=a.field.customOptions.currency&&i.mask("#.##0,00",{reverse:!0});else if(void 0!=a.field.customOptions.telefone){var d=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},r={onKeyPress:function(e,t,a,n){a.mask(d.apply({},arguments),n)}};t(function(){i.mask(d,r)},100)}else"date"==a.field.type?i.mask("99/99/9999"):void 0!=a.field.customOptions.cep&&i.blur(function(){var t=angular.element(this).scope();n(this).parent().attr("fw-data");e.get(this.value).then(function(e){var a=t.field.customOptions.cep;t.data[a.address]=e.logradouro,t.data[a.district]=e.bairro,t.data[a.city]=e.localidade,t.data[a.state]=e.uf})})}}}}angular.module("letsAngular").directive("fwDynamic",e),e.$inject=["viaCEP","$timeout","$compile","jQuery","$filter"]}(),function(){"use strict";function e(e,t){var a="vm";return{restrict:"A",require:"?ngModel",scope:!0,terminal:!0,priority:1,compile:function(t,n){function i(e,a){var n=t.attr(e);angular.isDefined(n)&&n!==!1||t.attr(e,a)}var l=angular.element('<div class="input-group"><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="'+a+'.openPopup($event)"><i class="glyphicon glyphicon-calendar"></i></button></span></div>');return i("type","text"),i("is-open",a+".popupOpen"),i("show-button-bar",!1),i("show-weeks",!1),i("datepicker-options","datepickerOptions"),t.addClass("form-control"),t.removeAttr("fw-date-picker"),t.after(l),l.prepend(t),function(t,a){var i={};void 0===t.data&&(t.data={}),t.field?null!=t.data[t.field.name]&&(i.initDate=new Date(t.data[t.field.name]),t.data[t.field.name]=angular.copy(i.initDate)):(t.field={customOptions:[]},n.fwDatePickerNgModelParent?(i.initDate=new Date(t.$parent[n.ngModel]),t.$parent[n.ngModel]=angular.copy(i.initDate)):(i.initDate=new Date(t[n.ngModel]),t[n.ngModel]=angular.copy(i.initDate)));var l="dd/MM/yyyy";void 0!==t.field.customOptions.monthpicker&&(i.datepickerMode="'month'",i.minMode="month",l="MM/yyyy"),a.find("input").attr("datepicker-popup",l),a.find("input").blur(function(){moment(this.value,l).isValid()||""===this.value?t.field.error=!1:t.field.error=!0}),t.datepickerOptions=i,e(a)(t)}},controller:["$scope",function(e){this.popupOpen=!1,this.openPopup=function(e){e.preventDefault(),e.stopPropagation(),this.popupOpen=!0}}],controllerAs:a}}angular.module("letsAngular").directive("fwDatePicker",e),e.$inject=["$compile","jQuery"]}(),function(){"use strict";function e(e,t,a){return{restrict:"E",replace:!1,scope:{crudChartSettings:"&",crudChartData:"&"},templateUrl:"src/views/framework/chart.html",controller:["$scope",function(n){var i=n.crudChartSettings(),l=i.chart_settings,o=n.crudChartData();n.key=i.key,n.d3chartUpdate=!1;var d=t.getMinMaxValues(l.xType,l.xLabel,l.xOffset,l.yType,l.yLabel,l.yOffset,o),r={x:[d.min.x,d.max.x],y:[d.min.y,d.max.y]};n.d3chartStartDate=d.min.x,n.d3chartEndDate=d.max.x,n.d3chartConfig=e.configD3chart("line",["#092e64"],r),n.d3chartData=e.configD3chartData(i.fillArea||!1,i.key,o),n.$watch("d3chartStartDate",function(t,i){d.min.x=t,r={x:[d.min.x,d.max.x],y:[d.min.y,d.max.y]},n.d3chartConfig=e.configD3chart("line",["#092e64"],r),t!=i&&a.$broadcast("update-chart",{type:"filter"})}),n.$watch("d3chartEndDate",function(t,i){d.max.x=t,r={x:[d.min.x,d.max.x],y:[d.min.y,d.max.y]},n.d3chartConfig=e.configD3chart("line",["#092e64"],r),t!=i&&a.$broadcast("update-chart",{type:"filter"})})}],link:function(e,t,a,n,i){e.$el=t}}}angular.module("letsAngular").directive("fwChart",e),e.$inject=["fwChartService","fwComparatorService","$rootScope"]}(),function(){"use strict";function e(e){var t="vm";return{restrict:"A",priority:1,link:function(e,t){var a=t.find("input"),n=function(){var t=a.val(),n=t+" ";a.controller("ngModel").$setViewValue(n),e.$digest,a.controller("ngModel").$setViewValue(t)};t.find("button").click(n),a.click(n)},controller:function(){},controllerAs:t}}angular.module("letsAngular").directive("fwAutoComplete",e),e.$inject=["$compile"]}(),function(){"use strict";function e(e,t,a,n){var i="vm";return{restrict:"A",priority:1,link:function(e,n){var i=e;i.tableSelected=function(e,t,a){i.tableVisibily=!1;var n=e.currentTarget.firstElementChild.firstChild.data.trim();i.data[t]=a.id,i.data[t+".labelCopy"]={id:a.id,label:n},i.data[t+".label"]=n},i.loadDataAutoCompleteTable=function(e,l){var o=n.find(":input").val().split(" "),d="/^("+o[0]+")";o.splice(0,1),o.forEach(function(e){d+="(?=.*"+e+")"}),d+=".*/i";var r='{"limit": 5,"where":{"'+l+'":{"regexp":"'+d+'"}}}',s=t.appSettings.API_URL+e+"?filter="+r,c=t.appSettings.API_URL+e+"/crudGET/";a.get(s).then(function(e){i.autoCompleteTableData2=[],e.data.forEach(function(e){a.get(c+e.id).then(function(e){i.autoCompleteTableData2.push(e.data)})})})}},controller:["$scope",function(e){e.autoCompleteTableFocus=function(t){e.tableVisibily=!0},e.autoCompleteTableLostFocus=function(){setTimeout(function(){e.$apply(function(){e.tableVisibily=!1})},100)},e.updateAutoCompleteTable=function(t,a){e.loadDataAutoCompleteTable(t,a)}}],controllerAs:i}}angular.module("letsAngular").directive("fwAutoCompleteTable",e),e.$inject=["$compile","$rootScope","$http","$timeout"]}(),function(){"use strict";function e(e){return{scope:{crudTabListData:"=",crudTabListSettings:"&",parentData:"="},templateUrl:"src/views/crud/crud-tab-list.html",link:function(e,t){setTimeout(function(){var t=e.crudTabListSettings();e.data=e.parentData,e.type=t.type,e.headers=t.headers,e.app=e.$parent.app,e.crudTabListData&&(e.extraData=e.crudTabListData)},1e3)}}}angular.module("letsAngular").directive("crudTabList",e),e.$inject=["jQuery"]}(),function(){"use strict";function e(e,t,a,n,i,l){return{scope:{crudListSettings:"&",crudListDependenciesData:"&",app:"="},controller:["$scope",function(e){e.route=null,e.$on("refreshGRID",function(){console.log("Refreshing grid..."),e.pageableCRUDModel.fetch()})}],link:function(l,o,d){function r(){function o(e){function a(){return d.fields[1]&&"string"===d.fields[1].type?f.render().sort(d.fields[1].name,"ascending").$el:f.render().$el}var i=[],o=function(){};o.prototype=new n.StringFormatter,_.extend(o.prototype,{fromRaw:function(e,t,a,n,i){return e}}),_.each(d.fields,function(e,t){if(e.viewable){var a={name:e.name,label:e.label,cell:"string",editable:!1,headers:e};if("boolean"==e.type&&(a.sortable=!1,a.cell=n.Cell.extend({className:"custom-situation-cell",formatter:{fromRaw:function(t,a){return t?e.customOptions.statusTrueText:e.customOptions.statusFalseText},toRaw:function(e,t){return"down"}}})),"simplecolor"==e.type)a.sortable=!1,a.cell=n.Cell.extend({className:"custom-situation-cell",initialize:function(){n.Cell.prototype.initialize.apply(this,arguments)},render:function(){this.$el.empty();var e='<cp-color class="color-picker" style="background-color: '+this.model.attributes.cor+'"></cp-color>';return this.$el.append(e),this.delegateEvents(),this}});else if("custom"==e.type){var l={fromRaw:e.toString,toRaw:function(e,t){return"down"}};a.sortable=!1;var o={className:"custom-cell",formatter:l};("download"===e.name||"print"===e.name)&&(o.initialize=function(){n.Cell.prototype.initialize.apply(this,arguments)},o.render=function(){this.$el.empty();var e=l.fromRaw();return this.$el.append(e),this.delegateEvents(),this}),a.cell=n.Cell.extend(o)}else if("address"==e.type){var d={fromRaw:function(e,t){try{return e.city+" - "+e.state}catch(a){return""}},toRaw:function(e,t){return"down"}},r=n.Cell.extend({className:"address-cell",formatter:d});a.cell=r}else if("float"==e.type)a.cell=n.NumberCell.extend({decimalSeparator:",",orderSeparator:"."});else if("date"==e.type){var s="DD/MM/YYYY";void 0!==e.customOptions.monthpicker&&(s="MM/YYYY"),a.cell=n.Extension.MomentCell.extend({modelFormat:"YYYY/M/D",displayLang:"pt-br",displayFormat:s})}else if(void 0!=e.customOptions["enum"]){var c=[];for(var u in e.customOptions["enum"]){var f=e.customOptions["enum"][u];c.push([f,u])}a.cell=n.SelectCell.extend({optionValues:c})}else 1==e.autocomplete&&(a.name=a.name+".label");i.push(a)}});var r=n.Cell.extend({className:"text-right btn-column"+(1==d.tab?" detail":""),template:function(){var e=[];if(d.tab)if(d.settings){if(d.settings.edit){var a=t('<button type="button" class="btn btn-default btn-edit-detail-data"><span class="glyphicon glyphicon-pencil"></span></button>');a.attr("data-route",d.url),e.push(a)}if(d.settings["delete"]){var n=t('<button type="button" class="btn btn-default btn-delete-detail"><span class="glyphicon glyphicon-remove"></span></button>');n.attr("data-route",d.url),e.push(n)}}else{var n=t('<button type="button" class="btn btn-default btn-delete-detail"><span class="glyphicon glyphicon-remove"></span></button>');n.attr("data-route",d.url),e.push(n)}else d.settings.edit&&e.push(t('<button type="button" class="btn btn-default btn-edit"><span class="glyphicon glyphicon-pencil"></span></button>')),d.settings["delete"]&&e.push(t('<button type="button" class="btn btn-default btn-delete"><span class="glyphicon glyphicon-remove"></span></button>'));var i=t('<div class="btn-group" role="group">');return i.append(e),i},events:{},editRow:function(e){e.preventDefault()},render:function(){var e=this.template(this.model.toJSON());return this.$el.html(e),this.$el.data("model",this.model),this.$el.find("button.btn-edit").click(function(e){e.stopPropagation();var t=angular.element(this).scope();d.tab?t.$parent.edit($(this).closest("td").data("model").attributes):t.edit($(this).closest("td").data("model").attributes)}),this.$el.find("button.btn-delete").click(function(e){var t=window.confirm("Deseja realmente excluir esse registro?");if(t){var a=angular.element(this).scope();d.tab?a.$parent["delete"]($(this).closest("td").data("model").attributes):a["delete"]($(this).closest("td").data("model").attributes)}}),this.$el.find("button.btn-delete-detail").click(function(e){e.stopPropagation();var a=angular.element(this).scope(),n=t(this).attr("data-route");d.tab?a.$parent.deleteDetail(n,$(this).closest("td").data("model").attributes):a.deleteDetail(n,$(this).closest("td").data("model").attributes)}),this.$el.find("button.btn-edit-detail-data").click(function(e){e.stopPropagation();var a=angular.element(this).scope(),n=t(this).attr("data-route");d.tab?a.$parent.editDetail(n,$(this).closest("td").data("model").attributes,a.type):a.editDetail(n,$(this).closest("td").data("model").attributes,a.type)}),this.delegateEvents(),this}});i.push({name:"actions",label:"Ações",sortable:!1,cell:r}),l.$parent.app.helpers.isScreen("xs")&&i.splice(3,1);var s=[];1==d.tab&&s.push("detail"),void 0==d.settings||d.settings.edit||s.push("cant-edit");var c=n.Row.extend({className:s.join(" ")}),f=new n.Grid({row:c,columns:i,collection:e,className:"table table-striped table-editable no-margin mb-sm"}),p=new n.Extension.Paginator({slideScale:.25,goBackFirstOnSort:!1,collection:e,controls:{rewind:{label:'<i class="fa fa-angle-double-left fa-lg"></i>',title:"First"},back:{label:'<i class="fa fa-angle-left fa-lg"></i>',title:"Previous"},forward:{label:'<i class="fa fa-angle-right fa-lg"></i>',title:"Next"},fastForward:{label:'<i class="fa fa-angle-double-right fa-lg"></i>',title:"Last"}}}),m=u.render().$el;angular.element(".crud-list-header h4").css({"vertical-align":"middle","line-height":"34px",flex:1}),m.css({margin:"0px","float":"none",display:"inline-block","vertical-align":"middle","line-height":"34px",height:"34px",padding:"0px",width:"300px"}),m.find("span").css({top:0,bottom:0,height:"34px","font-size":"34px","vertical-align":"middle",left:"10px","margin-top":"0px"}),m.find(".clear").css({height:"34px","line-height":"35px",top:0,bottom:0,"margin-top":"0px"}),m.find('input[type="search"]').css({height:"34px","padding-top":0,"padding-bottom":0,"vertical-align":"middle","line-height":"34px","padding-left":"30px","padding-right":"30px",width:"80%"}),l.$el.find(".crud-list-header").append(m),l.$el.find(".table-container").html("").append(a()).append(p.render().$el)}var d=l.crudListSettings();d.route=i.API_URL+d.url,l.route=d.route,n.InputCellEditor.prototype.attributes["class"]="form-control input-sm";var r=a.Model.extend({}),s=a.PageableCollection.extend({model:r,url:d.route+(d.pagerGeneral?"/pagerGeneral":"/pager"),state:{pageSize:20},mode:"server",parseRecords:function(e,t){return e.data},parseState:function(e,t,a,n){return{totalRecords:e.total_count}}}),c=new s;l.pageableCRUDModel=c;var u=new n.Extension.ServerSideFilter({collection:c,name:"q",placeholder:"Buscar por..."});t(e).on("sn:resize",function(){o(c)}),o(c),c.fetch()}l.$el=o;var s=l.$parent.$watch("headers",function(e,t){if(null!=e){var a=l.crudListSettings();if(1==a.tab)var n=l.$parent.$watch("data",function(e,t){void 0!=e.id&&(r(),n(),s())});else r(),s()}})}}}angular.module("letsAngular").directive("crudList",e),e.$inject=["$window","jQuery","Backbone","Backgrid","appSettings","fwObjectService"]}(),function(){"use strict";function e(e,t,a){return{replace:!1,link:function(n,i){e(i).on("click",".button-new",function(){var t=e(this).attr("detail"),i=e(this).attr("origin");void 0==n.data[t]&&(n.data[t]=[]);var l=n.headers[i][t],o=n.headers.route.toLowerCase(),d=!0;void 0!==l.autocompleteDetail&&(d=l.autocompleteDetail),a.createCRUDModal(l,o,null,d).then(function(e){e["new"]=!0,e.disabled=!0,n.data[t].push(e)})}),t(function(){i.find(".tab-group .nav-tabs li:first").find("a").click(),i.find(':input[type!="hidden"]:first').focus()},500),$(i).parsley({priorityEnabled:!1,errorsContainer:function(e){return e.$element.closest(".input-container")}})}}}angular.module("letsAngular").directive("crudForm",e),e.$inject=["jQuery","$timeout","fwModalService"]}(),function(){"use strict";function e(){this.$get=["$templateRequest",function(e){return new t(e)}]}function t(e){var t=this;return t.getCrudBaseTemplate=function(){return e("src/views/crud/crud.html")},t.getCrudListTemplate=function(){return e("src/views/crud/crud-list.html")},t.getCrudEditTemplate=function(){return e("src/views/crud/crud-edit.html")},{getCrudBaseTemplate:t.getCrudBaseTemplate,getCrudListTemplate:t.getCrudListTemplate,
getCrudEditTemplate:t.getCrudEditTemplate}}angular.module("letsAngular").provider("fwFileLoad",e)}(),function(){"use strict";function e(e){return e.Backgrid}angular.module("letsAngular").factory("Backgrid",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){return e.Backbone}angular.module("letsAngular").factory("Backbone",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){if(null!=e){"string"==typeof e&&(e=new Date(e));var t=" meses",a=moment(e),n=moment().diff(a,"months");return n?n>12&&(t=" anos",n=moment().diff(a,"years")):(t=" dias",n=moment().diff(a,"days")),n+t}}e.$inject=["birthday"],angular.module("letsAngular").filter("fwAgeMonth",e)}(),function(){"use strict";var e=angular.module("letsAngular");e.controller("CRUDController",["$scope","Restangular","module","$state","$window","$stateParams","$rootScope","headers",function(e,t,a,n,i,l,o,d){e.headersReady=!1;var r=d.get(a);e.headers=r,e.resource=t.all(r.route),e.$broadcast("headers-set"),e.headersReady=!0,e.goNew=function(){n.go(n.current.name.replace(".list",".new"))},e.goToList=function(){-1==n.current.name.indexOf(".list")&&n.go(n.current.name.replace(".edit",".list").replace(".new",".list"))},e.edit=function(e){n.go(n.current.name.replace(/\.list$/,".edit"),{id:e.id,page:null})},e["delete"]=function(t){return e.resource.customDELETE(t.id).then(function(){o.$broadcast("refreshGRID")})}}])}(),function(){"use strict";var e=angular.module("letsAngular");e.controller("CRUDFormModalController",["$controller","$scope","$modalInstance","ngToast","headers","Restangular","$stateParams","$timeout","$state","$rootScope","$q","$http","Upload","$modal","parentModel","autocompleteDetail","data","fwStringService","auth","fwObjectService","fwErrorService",function(t,a,n,i,l,o,d,r,s,c,u,f,p,m,g,b,h,v,y,w,D){t("CRUDEditController",{$scope:a,Restangular:o,$stateParams:d,$timeout:r,$modal:m,module:e,$state:s,$rootScope:c,$q:u,ngToast:i,$http:f,Upload:p}),a.data=h||{},a.data.emp_id=y.getUser().emp_id,l.modal_tab=!0,a.headers=l,a.acdetail=b,g=v.lemmatize(g),a.resource=o.all(g),a.cancel=function(){void 0!==a.data.disabled&&(h.disabled=!0),n.dismiss("cancel")},a.submit=function(){this.crudForm.$valid?n.close(a.data):D.emitFormErrors(this.crudForm)},a.$on("selected-autocomplete",function(e,t){}),c.$on("cancel-modal",function(e,t){n.dismiss("cancel")})}])}(),function(){"use strict";var e=angular.module("letsAngular");e.controller("CRUDEditController",["$scope","Restangular","$stateParams","$timeout","$modal","module","$state","$rootScope","$q","ngToast","$http","Upload","fwModalService","Atendimento",function(e,t,a,n,i,l,o,d,r,s,c,u,f,p){e.data={},e.dataLoaded=!1,e.module=l,e.$http=c,e.datepickers={},e.datepickerToggle=function(t){void 0==e.datepickers[t]&&(e.datepickers[t]=!1),e.datepickers[t]=!e.datepickers[t]},e.fetchData=function(){if(a.id)e.$parent.resource.customGET("crudGET/"+a.id).then(function(t){for(var a in e.headers.fields){var n=e.headers.fields[a];"date"==n.type&&void 0!=t[n.name]&&null!=t[n.name]&&(t[n.name]=new Date(t[n.name])),n.customOptions.f}var i=e.headers.tabs_session;if(void 0===i){i=[];for(var l in e.headers.masterdetails)i.push(e.headers.masterdetails[l])}for(var o in i){var d=i[o].label_stem;if(void 0!==t[d]&&t[d].length>0)for(var r in t[d])t[d][r].disabled=!0}e.data=t,e.dataLoaded=!0,e.$emit("data-loaded")});else{for(var t in e.headers.fields){var n=e.headers.fields[t];"boolean"==n.type&&(e.data[n.name]=n.customOptions["default"]?n.customOptions["default"]:!1)}e.dataLoaded=!0,e.$emit("data-loaded")}},e.headersReady&&e.fetchData(),e.$on("headers-set",function(){e.fetchData()}),e._upload=function(e,t){var a=d.appSettings.API_URL+"upload";return void 0!=e.customOptions.file.container&&(a+="/"+e.customOptions.file.container+"/upload"),u.upload({url:a,data:{file:t}})},e.download=function(t,a){if(void 0!=t.customOptions.file.container)var n=d.appSettings.API_URL+"upload/"+t.customOptions.file.container+"/download/"+e.data[t.name];else var n=d.appSettings.API_URL+e.module+"/download/"+t.name+"/"+a;e._download(n,t)},e.downloadDetail=function(t,a,n){var i=d.appSettings.API_URL+e.module+"/details/"+t+"/download/"+a.name+"/"+n;e._download(i,a)},e._download=function(t,a){this.$http({method:"GET",url:t,responseType:"arraybuffer"}).success(function(t,n,i){if(i=i(),void 0!=a.customOptions.file.container)var l=e.data[a.name];else var l=i["content-disposition"].split(";")[1].split("=")[1].split('"')[1];var o=i["content-type"],d=new Blob([t],{type:o});e.downloadFile(d,l)})},e.downloadFile=function(e,t){var a=document.createElement("a");try{var n=window.URL.createObjectURL(e);a.setAttribute("href",n),a.setAttribute("download",t);var i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});a.dispatchEvent(i)}catch(l){}},e.submit=function(){var t=this,n={},i=t.data;if(_.each(t.headers.fields,function(e,t){"password"==e.type&&0!=e.name.indexOf("confirm")&&i["confirm_"+e.name]!=i[e.name]&&(n.password='Os campos "'+e.label+'" e "Confirmar '+e.label+'" não são iguais')}),_.each(t.data,function(e,t){-1!==t.indexOf(".label")&&void 0===i.id&&"object"!=typeof e&&""!==e&&(n[t]="Adicione o(a) "+t.split(".")[0]+" no sistema antes de escolher nesse formulário!"),"data_nascimento"===t&&(moment(e).isAfter(moment())||moment(e).isSame(moment(),"day"))&&(n[t]="Insira uma data de nascimento válida, anterior ao dia de hoje!")}),Object.keys(n).length>0){var l=new Array;_.each(n,function(e,t){l.push(e)}),s.warning(l.join("<br />"))}else if(this.crudForm.$valid){if(a.id)var d=e.data.put();else var d=e.$parent.resource.post(e.data);d.then(function(){void 0!=e.doAfterSave&&"function"==typeof e.doAfterSave?e.doAfterSave():o.go(o.current.name.replace(".edit",".list").replace(".new",".list"))},function(e){function a(e){for(var a in t.headers.fields){var n=t.headers.fields[a];if(n.name==e)return n.label}}var n=[];if(422==e.status)if("CANT_SAVE_MODEL"==e.data.error.code)n.push(e.data.error.message);else{var i=e.data.error.details.codes,l={presence:"O campo %s é obrigatório",absence:"O campo %s deve ser nulo","unknown-property":"O campo %s não foi definido",length:{min:"O campo %s é muito curto",max:"O campo %s é muito longo",is:"O campo %s está com tamanho inválido"},common:{blank:"O campo %s está em branco","null":"O campo %s está nulo"},numericality:{"int":"O campo %s não é um número inteiro",number:"O campo %s não é um número"},inclusion:"O campo %s não foi incluído na lista",exclusion:"O campo %s não pode ser excluído",uniqueness:"O campo %s está repetido com o de outro registro"};_.each(i,function(e,t){var i=a(t),o=l[e].replace("%s",i);n.push(o)})}s.warning(n.join("<br />"))})}else{var r=[],c=Object.keys(this.crudForm.$error),u=/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;for(var f in c){var p=this.crudForm.$error[c[f]];for(var m in p){var g=p[m].$options.fieldInfo.label;"required"==c[f]?r.push("O campo "+g+" é obrigatório"):"date"==c[f]&&0==u.test(p[m].$viewValue)&&r.push("O campo "+g+" está com uma data inválida")}}if(r.length>0)s.warning(r.join("<br />"));else{if(a.id)var d=e.data.put();else var d=e.$parent.resource.post(e.data);d.then(function(){void 0!=e.doAfterSave&&"function"==typeof e.doAfterSave?e.doAfterSave():o.go(o.current.name.replace(".edit",".list").replace(".new",".list"))},function(e){function a(e){for(var a in t.headers.fields){var n=t.headers.fields[a];if(n.name==e)return n.label}}console.log(e);var n=[];if(422==e.status)if("CANT_SAVE_MODEL"==e.data.error.code)n.push(e.data.error.message);else{var i=e.data.error.details.codes,l={presence:"O campo %s é obrigatório",absence:"O campo %s deve ser nulo","unknown-property":"O campo %s não foi definido",length:{min:"O campo %s é muito curto",max:"O campo %s é muito longo",is:"O campo %s está com tamanho inválido"},common:{blank:"O campo %s está em branco","null":"O campo %s está nulo"},numericality:{"int":"O campo %s não é um número inteiro",number:"O campo %s não é um número"},inclusion:"O campo %s não foi incluído na lista",exclusion:"O campo %s não pode ser excluído",uniqueness:"O campo %s está repetido com o de outro registro"};_.each(i,function(e,t){var i=a(t),o=l[e].replace("%s",i);n.push(o)})}s.warning(n.join("<br />"))})}}},e.cancel=function(){o.go(o.current.name.replace(".edit",".list").replace(".new",".list"))},e.autocompleteModels={},e.autocompleteAdd=function(e){},e.autocomplete=function(t,a){var n=[],i=r.defer();if(t.autocomplete_dependencies.length>0){var l=t.autocomplete_dependencies;for(var o in l){var d=l[o];if(void 0==e.data[d.field]||null==e.data[d.field]){var s="Selecione antes o(a) "+d.label,c=[];return c.push({id:-1,label:s}),i.resolve(c),i.promise}n[d.field]=e.data[d.field]}}return a=a.trim(),(0==a.length||1==t.customOptions.select)&&(a="[blank]"),void 0!==t.customOptions.general?e.resource.customGET("general/autocomplete/"+t.customOptions.general+"/"+a,n).then(function(e){t.quickAdd===!0&&"[blank]"!=a&&e.push({id:-1,label:"Adicionar novo: "+a}),i.resolve(e)},function(){return i.reject()}):void 0==t.customOptions.list?e.resource.customGET("autocomplete/"+t.name+"/"+a,n).then(function(e){t.quickAdd===!0&&"[blank]"!=a&&e.push({id:-1,label:"Adicionar novo: "+a}),i.resolve(e)},function(){return i.reject()}):i.resolve(t.customOptions.list),i.promise},e.autocompleteDetail=function(t,a,n){var i=[],l=r.defer();if(a.autocomplete_dependencies.length>0){var o=a.autocomplete_dependencies;for(var d in o){var s=o[d];if(void 0==e.data[s.field]||null==e.data[s.field]){var c="Selecione antes o(a) "+s.label,u=[];return u.push({id:-1,label:c}),l.resolve(u),l.promise}i[s.field]=e.data[s.field]}}return n=n.trim(),(0==n.length||1==a.customOptions.select)&&(n="[blank]"),void 0!==a.customOptions.general?e.resource.customGET("general/autocomplete/"+a.customOptions.general+"/"+n,i).then(function(e){a.quickAdd===!0&&"[blank]"!=n&&e.push({id:-1,label:"Adicionar novo: "+n}),l.resolve(e)},function(){return l.reject()}):e.resource.customGET("details/"+t+"/autocomplete/"+a.name+"/"+n,i).then(function(e){a.quickAdd&&"[blank]"!=n&&e.push({id:-1,query:n,label:"Adicionar novo: "+n}),l.resolve(e)},function(){return l.reject()}),l.promise},e.autocompleteSelect=function(t,a,n){return e.$emit("selected-autocomplete",{type:this.field.name,data:t}),"integer"!=typeof t.id||"integer"==typeof t.id&&t.id>0?void(this.data[this.field.name]=t.id):(this.data[this.field.name+".label"]=null,!1)},e.doafterAutoCompleteSelect=function(e,t,a){},e.autocompleteDetailSelect=function(t,a,n,i){-1!=a.id?this.data[this.$parent.field.name]=a.id:(a.$scope=this,e.resource.customPOST({query:a.query},"quickAdd/"+this.field.name).then(function(e){a.$scope.data[a.$scope.field.name]=e.id,a.$scope.data[a.$scope.field.name+".label"]=a.query},function(){s.warning("Houve algum problema ao adicionar...")})),e.doafterAutoCompleteSelect.call(this,this.data,a,n,i)},e.openPopup=function(e){e.preventDefault(),e.stopPropagation(),this.popupOpen=!0},e.deleteDetailData=function(e,t){window.confirm("Deseja realmente excluir esse item?")&&this.data[t].splice(this.data[t].indexOf(e),1)},e.deleteDetail=function(e,a){var n=t.all(e);n.customDELETE(a.id).then(function(){d.$broadcast("refreshGRID"),d.$broadcast("data-grid-updated",{type:e.split("/").pop()})})},e.editDetail=function(a,n,i){var l=jQuery(".button-new").attr("origin"),o=e.headers[l][i],r=e.headers.route.toLowerCase();e.headers.parent_route&&(r=e.headers.parent_route),f.createCRUDModal(o,r,n,!0).then(function(e){var i=t.all(a);i.customPUT(e,n.id).then(function(e){d.$broadcast("refreshGRID"),d.$broadcast("data-grid-updated",{type:a.split("/").pop()})})})},e.editDetailData=function(t,a){function n(e){l.fields.forEach(function(a){t[a.name]=e[a.name]}),t.disabled=!0}var i=jQuery(".button-new").attr("origin"),l=e.headers[i][a],o=e.headers.route.toLowerCase();t.disabled=!1,f.createCRUDModal(l,o,t,!0).then(function(e){n(e)})},e.buttonClick=function(t){e[t]()}}])}(),function(){"use strict";var e=angular.module("letsAngular");e.controller("CRUDEditDetailController",["$scope","Restangular","$stateParams","$timeout","headers","$rootScope","$modalInstance","$q","ngToast",function(e,t,a,n,i,l,o,d,r){e.data={},e.headers=i,e.resource=t.all(i.route),e.datepickers={},e.datepickerToggle=function(t){void 0==e.datepickers[t]&&(e.datepickers[t]=!1),e.datepickers[t]=!e.datepickers[t]},n(function(){e.submit=function(){this.crudForm.$valid&&e.resource.customPOST(e.data,a.id).then(function(){l.$broadcast("refreshGRID"),o.dismiss("success")},function(e){var t=[];for(var a in e.data)for(var n in e.data[a])t.push(e.data[a][n]);console.log("entrou nesse aqui"),r.warning(t.join("<br />"))})},e.cancel=function(){o.dismiss("cancel")},e.autocompleteModels={},e.autocomplete=function(a,n){var l=[];if(a.autocomplete_dependencies.length>0){var o=a.autocomplete_dependencies;for(var s in o){var c=o[s];if(void 0==e.data[c]||null==e.data[c])return void r.warning("missing "+c);l[c]=e.data[c]}}var u=d.defer();if(n=n.trim(),0==n.length&&(n="[blank]"),void 0!==a.customOptions.general){var f=t.all(i.generalRoute);f.customGET("general/autocomplete/"+a.customOptions.general+"/"+n,l).then(function(e){a.quickAdd===!0&&"[blank]"!=n&&e.push({id:-1,label:"Adicionar novo: "+n}),u.resolve(e)},function(){return u.reject()})}else e.resource.customGET("autocomplete/"+a.name+"/"+n,l).then(function(e){a.quickAdd&&"[blank]"!=n&&e.push({id:-1,query:n,label:"Adicionar novo: "+n}),u.resolve(e)},function(){return u.reject()});return u.promise},e.autocompleteSelect=function(t,a,n){e.$emit("selected-autocomplete",{type:this.field.name,data:t}),console.log(t),-1!=t.id?this.data[this.field.name]=t.id:(t.$scope=this,e.resource.customPOST({query:t.query},"quickAdd/"+this.field.name).then(function(e){t.$scope.data[t.$scope.field.name]=e.id,t.$scope.data[t.$scope.field.name+".label"]=t.query},function(){r.warning("Houve algum problema ao adicionar...")}))}},500)}])}(),angular.module("letsAngular").run(["$templateCache",function(e){e.put("app/views/framework/breadcrumb.html",'<div class="col-md-5 col-lg-5 col-xs-5"><ol class="breadcrumb"><li><a ui-sref="app.dashboard">Home</a></li><li class="active"><a ng-click="goToList()">{{headers.label}}</a></li></ol></div>'),e.put("app/views/framework/chart.html",'<section class="widget"><header class="row"><h4>Relatório de <span class="fw-semi-bold">{{key}}</span></h4></header><div data-name="filter" style="margin-top: .5em;"><div class="col-sm-6 col-lg-6" style="padding: 0;"><label for="">Data de Início</label> <input type="text" ng-model="$parent.d3chartStartDate" fw-date-picker="true" fw-date-picker-ng-model-parent="true" data-date-format="DD/MM/YYYY" disabled="true"></div><div class="col-sm-6 col-lg-6" style="padding: 0;"><label for="">Data de Fim</label> <input type="text" ng-model="$parent.d3chartEndDate" fw-date-picker="true" fw-date-picker-ng-model-parent="true" data-date-format="DD/MM/YYYY" disabled="true"></div></div><div class="widget-body"><div data-nvd3-chart="" data-chart="d3chartConfig" data-datum="d3chartData"><svg class=""></svg></div></div></section>'),e.put("app/views/framework/input-detail.html",'<div><input ng-if="field.type != \'boolean\'" "="" class="main-input form-control" fw-dynamic="" ng-required="field.notnull" ng-show="field.autocomplete === false" type="text" ng-model="detail_data[field.name]"> <input ng-if="field.type == \'boolean\'" ng-required="field.notnull" type="checkbox" id="{{field.name}}" data-ui-switch="{size: \'small\'}" data-ng-model="detail_data[field.name]"> <input typeahead-on-select="autocompleteDetailSelect(detail_key, $item, $model, $label)" aria-autocomplete="none" autocomplete="false" typeahead-min-length="3" typeahead="row as row.label for row in $parent.autocompleteDetail(detail_key, field, $viewValue)" ng-if="field.autocomplete !== false" ng-required="field.notnull" type="text" class="form-control" ng-model="detail_data[field.name + \'.label\']" placeholder="{{field.label}}"></div>'),e.put("app/views/framework/input.html",'<div class="input-container" data-name="{{field.name}}"><div class="fw-input-group" ng-if="field.type != \'date\' && field.type != \'time\' && field.type != \'text\' && field.customOptions.file == undefined && field.customOptions.enum == undefined && field.customOptions.list == undefined && field.autocomplete == false && field.type !=\'boolean\' && field.type !=\'custom\' && field.customOptions.autocomplete_table == undefined"><span ng-if="field.customOptions.currency != undefined" class="input-group-addon">R$</span> <input step="0.5" data-parsley-type="number" type="number" lang="pt-BR" ng-if="field.type == \'float\'" ng-model-options="{fieldInfo: field}" id="{{field.name}}" string-to-number="" fw-dynamic="" ng-required="field.notnull" ng-model="data[field.name]" size="{{field.length}}" ng-disabled="field.disabled != undefined && field.disabled || data.disabled != undefined && data.disabled" class="main-input form-control" autocomplete="off" min="{{field.customOptions.min}}"><fw-tags ng-model-options="{fieldInfo: field}" ng-if="field.type == \'tags\'" fw-tags="" tags="data[field.name]" name="{{field.name}}"></fw-tags><input ng-model-options="{fieldInfo: field}" ng-if="field.type != \'password\' && field.type != \'date\' && field.type != \'float\' && field.type != \'text\' && field.customOptions.file == undefined && field.customOptions.enum == undefined && field.customOptions.email == undefined && field.autocomplete == false && field.type != \'boolean\' && field.type != \'tags\' && field.type != \'custom\' && field.type != \'simplecolor\'" name="{{field.name}}" type="text" id="{{field.name}}" fw-dynamic="" ng-required="field.notnull" ng-model="data[field.name]" size="{{field.length}}" ng-disabled="field.disabled != undefined && field.disabled || data.disabled != undefined && data.disabled" class="main-input form-control" autocomplete="off"><input ng-model-options="{fieldInfo: field}" ng-if="field.type == \'simplecolor\'" color-picker="" color-me="true" name="{{field.name}}" type="text" id="{{field.name}}" set-colors="{{field.customOptions.colors}}" fw-dynamic="" ng-required="field.notnull" ng-model="data[field.name]" size="{{field.length}}" ng-disabled="field.disabled != undefined && field.disabled || data.disabled != undefined && data.disabled" class="main-input form-control" autocomplete="off"> <input ng-model-options="{fieldInfo: field}" ng-if="field.type == \'password\'" type="password" id="{{field.name}}" fw-dynamic="" ng-required="field.notnull" ng-model="data[field.name]" ng-disabled="field.disabled != undefined && field.disabled || data.disabled != undefined && data.disabled" class="main-input form-control" autocomplete="off"> <input ng-model-options="{fieldInfo: field}" ng-if="field.customOptions.email != undefined" type="email" id="{{field.name}}" string-to-number="" fw-dynamic="" ng-required="field.notnull" ng-model="data[field.name]" ng-disabled="field.disabled != undefined && field.disabled" class="main-input form-control" autocomplete="off"></div><div ng-if="field.type == \'custom\'" ng-bind-html="fieldHtml()"></div><div ng-if="field.type == \'date\'"><input ng-model-options="{fieldInfo: field, allowInvalid: true}" type="text" fw-date-picker="true" fw-dynamic="" ng-required="field.notnull" id="{{field.name}}" name="{{field.name}}" ng-model="$parent.data[field.name]" class="form-control" data-date-format="DD/MM/YYYY" placeholder="DD/MM/YYYY" ng-disabled="data.disabled != undefined && data.disabled" autocomplete="off"><ul class="parsley-errors-list filled" ng-if="field.error"><li class="parsley-required">A data informada é inválida.</li></ul></div><div ng-if="field.type == \'time\'"><timepicker ng-model="$parent.data[field.name]" ng-disabled="data.disabled != undefined && data.disabled" hour-step="field.customoptions.timepicker.hstep || 1" minute-step="field.customoptions.timepicker.mstep || 1" show-meridian="field.customoptions.timepicker.meridian"></timepicker><ul class="parsley-errors-list filled" ng-if="field.error"><li class="parsley-required">O horário informado é inválido.</li></ul></div><div fw-upload="" ng-if="field.type == \'string\' && field.customOptions.file != undefined" class="fw-input-group"><div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="{{f.progress || defaultProgress}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em;" ng-style="{\'width\': \'{{f.progress || defaultProgress}}%\'}" ng-if="(f.progress != undefined && f.progress != 0) || defaultProgress != 0"><span ng-if="f.progress != undefined && f.progress != 0">{{f.progress + \'%\'}} <span ng-if="f.progress == 100">{{f.name}}</span></span> <span ng-if="f.progress == undefined" ng-bind="$parent.data[field.name]"></span></div></div><input type="hidden" class="form-control" disabled="disabled" name="temp_filename" ng-model="$parent.data[field.name]" id="{{field.name}}" ng-required="field.notnull" autocomplete="off"><span class="input-group-btn"><button ng-if="alreadySent == false || field.customOptions.only_upload == true" type="file" ngf-select="upload($file, $invalidFiles)" class="btn btn-default btn-upload"><i class="glyphicon glyphicon-upload"></i></button> <button ng-if="alreadySent == true && (field.customOptions.only_upload != true)" ng-click="download(field, data.id)" type="button" class="btn btn-default"><i class="glyphicon glyphicon-download"></i></button></span></div><textarea ng-model-options="{fieldInfo: field}" ng-if="field.type == \'text\'" id="{{field.name}}" fw-dynamic="" ng-required="field.notnull" ng-model="data[field.name]" ng-disabled="field.disabled != undefined && field.disabled || data.disabled != undefined && data.disabled" placeholder="{{field.customOptions.placeholder ? field.customOptions.placeholder : \'\'}}" class="main-input form-control" rows="{{field.customOptions.rows}}"></textarea><div class="row" ng-if="field.customOptions.enum != undefined"><div class="col-sm-6"><div ng-class="{checkbox: (field.customOptions.multiple != undefined && field.customOptions.multiple == true), radio: (field.customOptions.multiple == undefined || field.customOptions.multiple == false)}" ng-repeat="(option_key, option_label) in field.customOptions.enum"><input ng-model-options="{fieldInfo: field}" ng-if="(field.customOptions.multiple == undefined || field.customOptions.multiple == false)" type="radio" name="{{field.name}}" id="{{field.name}}_{{option_key}}" value="{{option_key}}" ng-model="$parent.data[field.name]" ng-required="field.notnull" selected="{\'selected\': $parent.data[field.name] == $parent.data[field.name]}" autocomplete="off"> <input ng-model-options="{fieldInfo: field}" ng-if="(field.customOptions.multiple != undefined && field.customOptions.multiple == true)" type="checkbox" checklist-before-change="shouldChange(key)" ng-required="field.notnull" id="{{field.name}}_{{option_key}}" checklist-model="data[field.name]" checklist-value="option_key" autocomplete="off"> <label for="{{field.name}}_{{option_key}}"></label> {{option_label}}</div><div ng-if="!isEmpty(field.customOptions.enum)"><span>Nenhuma alternativa foi cadastrada para esse campo!</span></div></div></div><ui-select ng-if="field.customOptions.list !== undefined" ng-model="$parent.data[field.name]" ng-model-options="{fieldInfo: field}" ng-required="field.notnull" theme="bootstrap" id="{{field.name}}_{{option_key}}" value="{{option_key}}"><ui-select-match placeholder="Selecione uma opção da lista">{{$parent.data[field.name].value}}</ui-select-match><ui-select-choices repeat="(option_key, option_label) in field.customOptions.list | filter: $select.search"><div ng-bind-html="option_label.value | highlight: $select.search"></div></ui-select-choices></ui-select><label for="{{field.name}}" ng-if="field.type == \'boolean\'"><toggle id="{{field.name}}" ng-model-options="{fieldInfo: field}" ng-model="data[field.name]" name="{{field.name}}" on="{{field.customOptions.statusTrueText}}" off="{{field.customOptions.statusFalseText}}" size="btn-sm" ng-if="data.disabled == undefined || (data.disabled != undefined && !data.disabled)"></toggle><span ng-if="data.disabled != undefined && data.disabled">{{$parent.data[field.name] ? field.customOptions.statusTrueText : field.customOptions.statusFalseText}}</span></label><div fw-auto-complete="" class="fw-input-group fw-auto-complete input-group" ng-if="field.autocomplete !== false && field.customOptions.autocomplete_table == undefined"><input id="{{field.name}}" ng-model-options="{fieldInfo: field}" fw-auto-complete="" typeahead-on-select="autocompleteSelect($item, $model, $label)" aria-autocomplete="none" autocomplete="off" typeahead-min-length="0" typeahead="row as row.label for row in autocomplete(field, $viewValue)" type="text" class="form-control" name="{{field.name}}" ng-required="field.notnull" ng-model="$parent.data[field.name + \'.label\']" size="{{field.length}}" placeholder="{{field.label}}" ng-disabled="(data.disabled != undefined && data.disabled) || field.disabled"> <span class="input-group-btn" ng-if="data.disabled == undefined"><button type="button" class="btn btn-default" disabled="true"><i class="glyphicon" ng-class="{\'glyphicon-search\': field.customOptions.select == undefined, \'glyphicon-menu-down\': field.customOptions.select == true}"></i></button></span></div><div fw-auto-complete="" class="fw-input-group fw-auto-complete input-group" ng-if="field.autocomplete !== false && field.customOptions.autocomplete_table != undefined"><input style="display:none" id="{{field.name}}" ng-model-options="{fieldInfo: field}" fw-auto-complete="" typeahead-on-select="autocompleteSelect($item, $model, $label)" aria-autocomplete="none" autocomplete="off" typeahead-min-length="0" typeahead="row as row.label for row in autocomplete(field, $viewValue)" type="text" class="form-control" name="{{field.name}}" ng-required="field.notnull" ng-model="$parent.data[field.name + \'.label\']" size="{{field.length}}" placeholder="{{field.label}}" ng-disabled="data.disabled != undefined && data.disabled"></div><div fw-auto-complete-table="" ng-if="field.customOptions.autocomplete_table != undefined" data-name="{{field.name}}"><div class="fw-input-group fw-auto-complete input-group"><input type="text" id="input-ac-table" ng-model="$parent.data[field.name + \'.label\']" ng-model-options="{fieldInfo: field, debounce: 500}" class="form-control" autocomplete="off" ng-change="updateAutocompleteTable(field.customOptions.autocomplete_table.table_name,field.customOptions.autocomplete_table.table_columns[0].name, this)" ng-focus="autocompleteTableFocus(field.customOptions.autocomplete_table.table_name)" ng-blur="autocompleteTableLostFocus()" ng-disabled="data.disabled != undefined && data.disabled"> <span class="input-group-btn" ng-if="data.disabled == undefined"><button type="button" class="btn btn-default" disabled="true"><i class="glyphicon" ng-class="{\'glyphicon-search\': field.customOptions.select == undefined, \'glyphicon-menu-down\': field.customOptions.select == true}"></i></button></span></div><div ng-if="field.customOptions.autocomplete_table != undefined" ng-show="tableVisibily" ng-model-options="{fieldInfo: field}"><div class="table-container"><table id="myTable" class="table table-striped"><thead><tr><th ng-repeat="column in field.customOptions.autocomplete_table.table_columns">{{column.label}}</th></tr></thead><tbody><tr ng-repeat="data in autocompleteTableData2" id="{{data.id}}" ng-mousedown="tableSelected($event,field.name,data)"><td ng-repeat="column in field.customOptions.autocomplete_table.table_columns">{{data[column.name]}}</td></tr></tbody></table></div></div></div></div>'),e.put("app/views/crud/crud-edit.html",'<div class="row"><ng-include src="\'src/views/framework/breadcrumb.html\'"></ng-include></div><section class="widget"><div class="widget-body"><form class="form-horizontal" role="form" ng-submit="submit(this)" crud-form="" name="crudForm" headers="{{headers}}" novalidate="" autocomplete="off"><ng-include src="\'src/views/crud/crud-form.html\'"></ng-include></form></div></section>'),e.put("app/views/crud/crud-form.html",'<div><div class="fixed-caption-block" ng-if="headers.fixed_tab"><fieldset style="position: relative;"><ng-include ng-if="customFixedTabHTML != undefined" src="customFixedTabHTML"></ng-include><div class="form-group" ng-repeat="field in headers.fields | filter: {tab: \'fixed\', editable: true}"><label for="{{field.name}}" class="col-sm-2 control-label">{{field.label}} <span ng-if="field.required">*</span></label><div class="col-sm-9"><fw-input fw-data="data"></fw-input></div></div></fieldset><fieldset ng-repeat="(detail_key, detail) in headers.masterdetails"><legend><strong>{{detail.label}}</strong></legend><table class="detail-table"><thead><tr><th ng-repeat="field in detail.fields | filter: {editable: true}">{{field.label}}</th><th>Ações</th></tr></thead><tbody><tr ng-repeat="detail_data in data[detail_key]" ng-class="{\'new\': detail_data.new != undefined}"><td ng-repeat="field in detail.fields | filter: {editable: true}"><fw-input fw-data="detail_data"></fw-input></td><td><button type="button" class="btn btn-delete btn-default" ng-click="deleteDetailData(detail_data, detail_key)"><span class="glyphicon glyphicon-remove"></span></button></td></tr><tr ng-if="data[detail_key].length == 0" class="no-data"><td colspan="100%">Nenhum dado cadastrado.</td></tr></tbody></table><div class="pull-right"><button type="button" class="btn btn-big btn-primary button-new" origin="masterdetails" detail="{{detail_key}}"><span class="icon fa fa-plus"></span>Novo {{detail.label_row}}</button></div></fieldset></div><tabset class="tab-group" ng-class="{\'hide-nav\': (_.size(headers.tabs) == 0 && _.size(headers.main_tabs) == 0 && _.size(headers.tabs_session) == 0)}"><tab ng-if="headers.main_tabs == undefined" heading="{{headers.label_row}}"><fieldset><legend><strong>Informações Principais</strong></legend><div class="form-group" ng-repeat="field in headers.fields | filter: {editable: true}"><label for="{{field.name}}" class="col-sm-2 control-label">{{field.label}} <span ng-if="field.required">*</span></label><div class="col-sm-9"><fw-input fw-data="data"></fw-input></div></div></fieldset><fieldset ng-repeat="(detail_key, detail) in headers.masterdetails" ng-if="detail.visible == undefined || detail.visible == true"><legend><strong>{{detail.label}}</strong></legend><table class="detail-table"><thead><tr><th ng-repeat="field in detail.fields | filter: {editable: true}">{{field.label}}</th><th>Ações</th></tr></thead><tbody><tr ng-repeat="detail_data in data[detail_key]" ng-class="{\'new\': detail_data.new != undefined}"><td ng-repeat="field in detail.fields | filter: {editable: true}"><fw-input fw-data="detail_data"></fw-input></td><td><button type="button" class="btn btn-edit btn-default" ng-click="editDetailData(detail_data, detail_key)"><span class="glyphicon glyphicon-pencil"></span></button> <button type="button" class="btn btn-delete btn-default" ng-click="deleteDetailData(detail_data, detail_key)"><span class="glyphicon glyphicon-remove"></span></button></td></tr><tr ng-if="data[detail_key].length == 0" class="no-data"><td colspan="100%">Nenhum dado cadastrado.</td></tr></tbody></table><div class="pull-right"><button type="button" class="btn btn-big btn-primary button-new" origin="masterdetails" detail="{{detail_key}}"><span class="icon fa fa-plus"></span>Novo {{detail.label_row}}</button></div></fieldset><ng-include ng-if="customFooter != undefined" src="customFooter"></ng-include></tab><tab ng-if="headers.main_tabs != undefined" ng-repeat="tab in headers.main_tabs" heading="{{tab}}"><fieldset><div class="form-group" ng-repeat="field in headers.fields | filter: {tab: $index, editable: true}"><label for="{{field.name}}" class="col-sm-2 control-label">{{field.label}} <span ng-if="field.required">*</span></label><div class="col-sm-9"><fw-input fw-data="data"></fw-input></div></div></fieldset></tab><tab ng-repeat="(detail_key, detail) in headers.tabs_session" heading="{{detail.label}}"><fieldset><table class="detail-table"><thead><tr><th ng-repeat="field in detail.fields | filter: {editable: true}">{{field.label}}</th><th>Ações</th></tr></thead><tbody><tr ng-repeat="detail_data in data[detail_key]" ng-class="{\'new\': detail_data.new != undefined}"><td ng-repeat="field in detail.fields | filter: {editable: true}"><fw-input fw-data="detail_data"></fw-input></td><td><button type="button" class="btn btn-edit btn-default" ng-click="editDetailData(detail_data, detail_key)"><span class="glyphicon glyphicon-pencil"></span></button> <button type="button" class="btn btn-delete btn-default" ng-click="deleteDetailData(detail_data, detail_key)"><span class="glyphicon glyphicon-remove"></span></button></td></tr><tr ng-if="data[detail_key].length == 0" class="no-data"><td colspan="100%">Nenhum dado cadastrado.</td></tr></tbody></table><div class="pull-right"><button type="button" class="btn btn-big btn-primary button-new" origin="tabs_session" detail="{{detail_key}}"><span class="icon fa fa-plus"></span>Novo {{detail.label_row}}</button></div></fieldset></tab><tab ng-if="data.id != null" ng-repeat="(tab_name, tab) in headers.tabs" heading="{{tab.label}}"><div class="row"><div class="col-md-2 col-lg-2 col-xs-2 pull-right"><a class="btn btn-primary btn-block btn-new" ng-click="newDetail(tab, data)"><span class="fa fa-plus"></span> Novo {{tab.label_row}}</a></div></div><section class="widget" crud-list="" crud-list-settings="{url: headers.route + \'/details/\' + data.id + \'/\' + tab_name, fields: tab.fields, tab: true, settings: headers.settings}"><div class="widget-body"><div class="table-container"></div></div></section></tab></tabset><div class="form-actions"><div class="row"><div class="col-sm-offset-4 col-sm-7"><button ng-if="!headers.disabled" type="submit" class="btn btn-big btn-primary"><span class="icon fa fa-floppy-o"></span>Salvar</button> <button type="button" class="btn btn-big btn-inverse" ng-click="cancel()"><span class="icon fa fa-undo"></span>Cancelar</button></div></div></div></div>'),
e.put("app/views/crud/crud-list.html",'<div class="row"><ng-include src="\'src/views/framework/breadcrumb.html\'"></ng-include><div class="row col-md-7 col-lg-7 col-xs-7" style="padding-right: 0;"><div class="col-md-4 col-lg-4 col-xs-4" ng-if="headers.settings.add" style="float: right; padding-right: 0;"><a class="btn btn-primary btn-block btn-new" ng-click="goNew()"><span class="icon fa fa-plus"></span>Novo Registro</a></div></div></div><section class="widget" crud-list="" crud-list-settings="{url: headers.route, fields: headers.fields, tab: false, settings: headers.settings}"><header class="crud-list-header row" style="display: flex;"><h4>{{headers.label}}</h4></header><div class="widget-body"><div class="table-container"></div></div></section>'),e.put("app/views/crud/crud-modal-form.html",'<div><fieldset ng-if="headers.masterdetails.search"><legend><strong>Selecionar um(a) {{headers.label_row}}</strong></legend><form class="form-horizontal" role="form" crud-form="" name="crudForm" novalidate=""><div class="form-group" ng-repeat="field in headers.masterdetails.search.fields"><div class="col-sm-12"><fw-input fw-data="data"></fw-input></div></div></form></fieldset><fieldset><legend><strong>{{headers.label}}: Novo Item</strong></legend><div class="form-group" ng-repeat="field in headers.fields | filter: {editable: true}"><label for="{{field.name}}" class="col-sm-2 control-label">{{field.label}} <span ng-if="field.required">*</span></label><div class="col-sm-9"><fw-input fw-data="modal_data"></fw-input></div></div><div class="form-group" style="padding: 2em;" ng-if="headers.buttons"><legend><strong>Ações</strong></legend><div ng-repeat="button in headers.buttons | filter: {viewable: true}"><button type="button" ng-click="buttonClick(button.method)" class="btn btn-big btn-primary"><span class="icon fa" ng-class="button.icon"></span>{{button.label}}</button></div></div></fieldset><div class="form-actions"><div class="row"><div class="col-sm-offset-4 col-sm-7"><button type="submit" class="btn btn-big btn-primary"><span class="icon fa fa-floppy-o"></span>Salvar</button> <button type="button" class="btn btn-big btn-inverse" ng-click="cancel()"><span class="icon fa fa-undo"></span>Cancelar</button></div></div></div></div>'),e.put("app/views/crud/crud-modal.html",'<section class="widget"><div class="widget-body"><form class="form-horizontal" role="form" ng-submit="submit(this)" crud-form="" name="crudForm" headers="{{headers}}" novalidate=""><ng-include src="\'src/views/crud/crud-modal-form.html\'"></ng-include></form></div></section>'),e.put("app/views/crud/crud-tab-list.html","<div><div class=\"row btn-tab\"><div class=\"col-md-4 col-lg-4 col-xs-4 pull-right\"><a class=\"btn btn-primary btn-block button-new\" origin=\"tabs\" ng-click=\"$parent.openTabModal(type)\"><span class=\"fa fa-plus\"></span> Novo {{headers['tabs'][type].label_row}}</a></div></div><section class=\"widget\" crud-list=\"\" crud-list-settings=\"{ url: headers['tabs'][type].tab_route + (headers['tabs'][type].data_path != undefined ? data[headers['tabs'][type].data_path].id : data.id) + '/' + headers['tabs'][type].label_stem, mainRoute: headers['tabs'][type].tab_route, fields: headers['tabs'][type].fields, tab: true, settings: headers['tabs'][type].settings, type: headers['tabs'][type].custom ? headers['tabs'][type].label_stem : type }\"><div class=\"widget-body\"><div class=\"table-container\"></div></div></section></div>"),e.put("app/views/crud/crud.html",'<div ui-view=""></div>')}]);